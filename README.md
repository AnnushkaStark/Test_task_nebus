# Test_task_nebus

Описание. 
Необходимо реализовать REST API приложения для справочника Организаций, Зданий, Деятельности. 
1. Организация - Представляет собой карточку организации в справочнике и должна содержать в себе следующую информацию: 
o Название: Например ООО “Рога и Копыта” 
o Номер телефона: организация может иметь несколько номеров телефонов (2-222-222, 3-333-333, 8-923-666-13-13) 
o Здание: Организация должна находится в одном конкретном здании (Например, Блюхера, 32/1) 
o Деятельность: Организация может заниматься несколькими видами деятельностей (Например, “Молочная продукция”, “Мясная продукция”) 
2. Здание - Содержит в себе как минимум информацию о конкретном здании, а именно: 
o Адрес: Например - г. Москва, ул. Ленина 1, офис 3 
o Географические координаты: Местоположение здания должно быть в виде широты и долготы. 
3. Деятельность - позволяет классифицировать род деятельности организаций в каталоге. Имеет название и может в древовидном виде вкладываться друг в друга. Пример возможного дерева деятельности: 
  - Еда 
    - Мясная продукция 
    - Молочная продукция 
  - Автомобили 
    - Грузовые 
  - Легковые 
      - Запчасти 
      - Аксессуары 
4. Стэк - стэк fastapi+pydantic+sqlalchemy+alembic 
 
Функционал приложения. 
Взаимодействие с пользователем происходит посредством HTTP запросов к API серверу с использованием статического API ключа. Все ответы должны быть в формате JSON. Необходимо реализовать следующие методы: 
· список всех организаций находящихся в конкретном здании 
· список всех организаций, которые относятся к указанному виду деятельности 
· список организаций, которые находятся в заданном радиусе/прямоугольной области относительно указанной точки на карте. список зданий 
· вывод информации об организации по её идентификатору 
· искать организации по виду деятельности. Например, поиск по виду деятельности «Еда», которая находится на первом уровне дерева, и чтобы нашлись все организации, которые относятся к видам деятельности, лежащим внутри. Т.е. в результатах поиска должны отобразиться организации с видом деятельности Еда, Мясная продукция, Молочная продукция. 
· поиск организации по названию 
· ограничить уровень вложенности деятельностей 3 уровням 
 
Задание 
· Спроектировать БД + Создать необходимые миграции + Заполнить БД тестовыми данными 
· Реализовать API согласно разделу Функционал приложения 
· Завернуть приложения в Docker контейнер, чтобы его можно было развернуть на любой машине (Если необходимо, то написать инструкцию по разворачиванию) 
· Добавить в проект документацию Swagger UI или Redoc с описанием всех методов приложения.

## Реализация
## Доступные энпойнты

1. Создать отрасль (industry)
2. Создать специализацию
специализаций в отрасли может быть несколько
3. Просмотр списка отраслей
4. Просмотр отрасли со списком специализации по uid  отрасли
5. Просмотр спика специализаций по uid отрасли
6. Создать отрагизацию
7. Чтение организации по uid организации 
8. Поиск организации по названию организации
9. Чтение всех организаций с возможностью фильтрации
- по названию отрасли
- по входящим специализациям
- исключить какие-либо специализации
- по названиею страны
- по названию региона
- по названию города
- по названию улицы
- по номеру дома
- по долготе (от - до)
- по широте (от - до)

## Генерация тестовых данных

Для генерации тестовых данных доступны энпонйты на которые нужно последовательно отправить get запросы через сваггер

1. Создание тестовых отраслей (industries)
 ```
http://127.0.0.1:8000/organization_service/api/v1/test_data/
```

2. Создание тестовых специализаций (создаст несколько специализаций для каждой отрасли)
```
http://127.0.0.1:8000/organization_service/api/v1/test_data/specializations/
```

3. Создание тестовых организаций
```
http://127.0.0.12:8000/organization_service/api/v1/test_data/test_data/organizations/
```

## Запуск проекта

1. В корневой директории создать файл .env для переменных окружения базы данных
```
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_USER=admin
POSTGRES_PASSWORD=postgres
POSTGRES_DB=db 
```


